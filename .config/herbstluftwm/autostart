#!/usr/bin/env bash
#                     __      
#    __  _____  ___  / /______
#   / / / / _ \/ _ \/ __/ ___/
#  / /_/ /  __/  __/ /_(__  ) 
#  \__, /\___/\___/\__/____/  
# /____/                      
#                     _____      
#   _________  ____  / __(_)___ _
#  / ___/ __ \/ __ \/ /_/ / __ `/
# / /__/ /_/ / / / / __/ / /_/ / 
# \___/\____/_/ /_/_/ /_/\__, /  
#                       /____/   
#                       for herbstluftwm
                      
# remeber to make this file runable!

hc() { # this aliases herbstclient to hc to make the conf more readable (don'ask me wat the $@ does)
    herbstclient "$@"
}

hc emit_hook reload

#################
## keybindings ##
#################

# remove all existing keybindings
hc keyunbind --all 

source ~/.config/herbstluftwm/keybinds

# theme
hc attr theme.tiling.reset 1
hc attr theme.floating.reset 1

# padding
hc set window_gap 2
#hc set frame_gap 1

hc attr theme.border_width 2
hc attr theme.floating.border_width 2
hc attr theme.floating.outer_width 2

hc set frame_padding 0
hc set smart_window_surroundings 0
hc set smart_frame_surroundings 0
hc set mouse_recenter_gap 0

hc set frame_border_width 0
hc set always_show_frame 0
hc set frame_bg_transparent 1
hc set frame_transparent_width 0
#hc set frame_gap 0

bg1="#242424"
bg2="#70cbe0"
hc attr theme.active.color "$bg2"
hc attr theme.normal.color "$bg1"
hc attr theme.urgent.color orange
hc attr theme.floating.outer_color "$bg1"
hc attr theme.active.inner_color "$bg2"
hc attr theme.active.outer_color "$bg2"
hc attr theme.background_color "#333333"
# hc set window_gap 5

# rules
hc unrule -F
# hc rule class=XTerm tag=3 # move all xterms to tag 3
hc rule focus=on # normally focus new clients
#hc rule focus=off # normally do not focus new clients
# give focus to most common terminals
#hc rule class~'(.*[Rr]xvt.*|.*[Tt]erm|Konsole)' focus=on
hc rule windowtype~'_NET_WM_WINDOW_TYPE_(DIALOG|UTILITY|SPLASH)' pseudotile=on
hc rule windowtype='_NET_WM_WINDOW_TYPE_DIALOG' focus=on
hc rule windowtype~'_NET_WM_WINDOW_TYPE_(NOTIFICATION|DOCK|DESKTOP)' manage=off
hc set tree_style '╾│ ├└╼─┐' # i have no clue what this is but it reminds me of the windows pipe screensaver

# unlock, just to be sure
hc unlock

# do multi monitor setup here, e.g.:
# hc set_monitors 1280x1024+0+0 1280x1024+1280+0
# or simply:
# hc detect_monitors

# find the panel
# use hc pad (read the man page ya dumbass) to set the padding for polybar.
# this loads the panel config file it uses dzen2 which is ok if a little light on... everything
for monitor in $(herbstclient list_monitors | cut -d: -f1) ; do # all this does is cycle through the moniors and reload my config of polybar
    hc pad $monitor 25 5 5 5  
    killall -q polybar
    while pgrep -u $UID -x polybar >/dev/null ; do sleep 0.5 ; done 
    polybar yeet # one thing you may want to do is call your bar the number of the monitor they are that way you can launch all your bars using this for loop! 
done
# finaly i load in all of my start up apps!
# I kill them first just to make sure they are 
killall -q compton
killall -q dunst
nitrogen --restore &# resoring my wallpaper 
dunst &# my notification deamon (yes you need one)
compton --config ~/.config/compton/compton.conf &# this makes everything look pretty (adds transparncy and drop shadows and stuff)
# xsetroot -solid '#5A8E3A' # this would set your background as solid colour (yes I am British so I spell colour the right way)
diff ~/.config/herbstluftwm/autostart /etc/xdg/herbstluftwm/autostart > ~/.config/herbstluftwm/buggy.diff &
## all the last line does is generate a diff file that shows the diffrences i made to the config.
## this allows me to compare my mistakes and fix my dumb mistakes (green or > is the og base config. red or < is the changes i made to the base config)
